<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta name="theme-color" content="#0FA36B"/>

<title>
  Zinus Embedded App: Remix + Shopify Functions powering checkout experiences | Zinus Tech Blog
</title>

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Zinus Embedded App: Remix + Shopify Functions powering checkout experiences | Zinus Tech Blog</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Zinus Embedded App: Remix + Shopify Functions powering checkout experiences" />
<meta name="author" content="Zinus Engineering" />
<meta property="og:locale" content="en" />
<meta name="description" content="Our Embedded App is a Remix-based Shopify application that centralizes admin UX, data, and a suite of checkout extensions for compliance and conversion. It ships with Polaris UI, Prisma session storage, and multiple UI Extensions that run natively in Shopify Checkout." />
<meta property="og:description" content="Our Embedded App is a Remix-based Shopify application that centralizes admin UX, data, and a suite of checkout extensions for compliance and conversion. It ships with Polaris UI, Prisma session storage, and multiple UI Extensions that run natively in Shopify Checkout." />
<link rel="canonical" href="http://localhost:4000/Zinus/posts/2025/09/10/embedded-app-architecture-checkout-extensions/" />
<meta property="og:url" content="http://localhost:4000/Zinus/posts/2025/09/10/embedded-app-architecture-checkout-extensions/" />
<meta property="og:site_name" content="Zinus Tech Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-09-10T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Zinus Embedded App: Remix + Shopify Functions powering checkout experiences" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zinus Engineering"},"dateModified":"2025-09-10T00:00:00+09:00","datePublished":"2025-09-10T00:00:00+09:00","description":"Our Embedded App is a Remix-based Shopify application that centralizes admin UX, data, and a suite of checkout extensions for compliance and conversion. It ships with Polaris UI, Prisma session storage, and multiple UI Extensions that run natively in Shopify Checkout.","headline":"Zinus Embedded App: Remix + Shopify Functions powering checkout experiences","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/Zinus/posts/2025/09/10/embedded-app-architecture-checkout-extensions/"},"url":"http://localhost:4000/Zinus/posts/2025/09/10/embedded-app-architecture-checkout-extensions/"}</script>
<!-- End Jekyll SEO tag -->


<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="icon" href="/Zinus/assets/favicon.svg" type="image/svg+xml">

<link rel="stylesheet" href="/Zinus/assets/css/main.css">

<!-- Mermaid for diagrams in posts -->
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>
  mermaid.initialize({
    startOnLoad: false,
    theme: 'default',
    securityLevel: 'loose',
    flowchart: { htmlLabels: false }
  });
</script>



  </head>
  <body class="site">
    <a class="skip-link" href="#content">Skip to content</a>
    <header class="site-header">
  <div class="container header__inner">
    <a class="brand" href="/Zinus/" aria-label="Zinus Tech Blog">
      <span class="brand__mark">Z</span>
      <span class="brand__name">Zinus Engineering</span>
    </a>
    <button class="nav-toggle" aria-expanded="false" aria-controls="site-nav">Menu</button>
    <nav id="site-nav" class="nav" aria-label="Primary navigation">
      <ul>
        
          <li><a href="http://localhost:4000/Zinus/">Home</a></li>
        
          <li><a href="http://localhost:4000/Zinus/posts/">Posts</a></li>
        
          <li><a href="http://localhost:4000/Zinus/about/">About</a></li>
        
      </ul>
    </nav>
  </div>
</header>
<script src="/Zinus/assets/js/site.js" defer></script>



    <main id="content" class="container">
      <article class="post">
  <header class="post__header">
    <h1 class="post__title">Zinus Embedded App: Remix + Shopify Functions powering checkout experiences</h1>
    <div class="post__meta">
      <time datetime="2025-09-10T00:00:00+09:00">2025.09.10</time>
      
        · <span>Zinus Engineering</span>
      
    </div>
    
      <div class="post__authors">
        
          <a class="author" href="https://www.zinus.com" target="_blank" rel="noopener">
            
            <img class="author__avatar" src="/Zinus/assets/img/avatar-fallback.svg" alt="Zinus Engineering">
            <span class="author__meta">
              <span class="author__name">Zinus Engineering</span>
              <span class="author__role">Commerce Platform</span>
            </span>
          </a>
        
      </div>
    
  </header>
  <div class="post__content">
    <p>Our Embedded App is a Remix-based Shopify application that centralizes admin UX, data, and a suite of checkout extensions for compliance and conversion. It ships with Polaris UI, Prisma session storage, and multiple UI Extensions that run natively in Shopify Checkout.</p>

<h3 id="stack">Stack</h3>
<ul>
  <li>Remix + Vite (Node ≥16)</li>
  <li><code class="language-plaintext highlighter-rouge">@shopify/shopify-app-remix</code> for auth, webhooks, session</li>
  <li>Polaris for admin UI</li>
  <li>Prisma (session storage via <code class="language-plaintext highlighter-rouge">PrismaSessionStorage</code>)</li>
  <li>App/Checkout UI Extensions (React runtime)</li>
</ul>

<pre><code class="language-1:21:c:/Zinus/Zinus/ZinusEmbeddedApp/app/shopify.server.js">const shopify = shopifyApp({
  apiKey: process.env.SHOPIFY_API_KEY,
  apiSecretKey: process.env.SHOPIFY_API_SECRET || "",
  apiVersion: ApiVersion.April24,
  scopes: process.env.SCOPES?.split(","),
  sessionStorage: new PrismaSessionStorage(prisma),
  webhooks: { APP_UNINSTALLED: { deliveryMethod: DeliveryMethod.Http, callbackUrl: "/webhooks" } },
  hooks: { afterAuth: async ({ session }) =&gt; { shopify.registerWebhooks({ session }); } },
});
</code></pre>

<h3 id="architecture">Architecture</h3>

<pre><code class="language-mermaid">flowchart LR
  Admin[Shopify Admin] --&gt;|Embedded| RemixApp
  RemixApp[Remix app\nPolaris UI + Prisma] --&gt; Shopify[Shopify APIs]
  subgraph Checkout
    CE1[Contiguous states restriction]
    CE2[Recycle fee auto-line]
    CE3[Countdown banner]
    CE4[Delivery info/metafields]
  end
  Checkout ===&gt; Shopify
</code></pre>

<h3 id="checkout-extensions">Checkout extensions</h3>

<p>1) Contiguous states restriction</p>
<ul>
  <li>Blocks the buyer journey if the address is a non-contiguous US location</li>
</ul>

<pre><code class="language-12:21:c:/Zinus/Zinus/ZinusEmbeddedApp/extensions/contiguous-states-restriction/src/Checkout.jsx">useBuyerJourneyIntercept(() =&gt; {
  return shippingAddress?.provinceCode &amp;&amp; restrictedLocations.includes(shippingAddress?.provinceCode)
    ? { behavior: 'block', reason: 'We currently do not ship to your location.', errors: [{ message: 'We ship to the 48 contiguous states...', target: '$.cart.deliveryGroups[0].deliveryAddress.provinceCode' }] }
    : { behavior: 'allow' };
});
</code></pre>

<p>2) Recycling fee automation</p>
<ul>
  <li>Detects mattresses/box-springs and auto-syncs the correct fee variant per state</li>
</ul>

<pre><code class="language-34:58:c:/Zinus/Zinus/ZinusEmbeddedApp/extensions/recycle-fee/src/Checkout.jsx">function checkForRecycleFee() {
  const provinceCode = shippingAddress?.provinceCode;
  if (feeLocations.includes(provinceCode)) {
    // match fee variant for province, reconcile quantity vs. cart contents
    if (feeInCart &amp;&amp; feeInCart.merchandise.selectedOptions[0].value !== provinceCode) {
      handleRemoveFromCart(feeInCart.id, feeInCart.quantity);
      handleAddToCart(feeId, feeInCart.quantity);
    }
    if (feeNeeded &gt; feeFound) { handleAddToCart(feeId, difference); }
  } else { /* remove any fee lines */ }
}
</code></pre>

<p>3) Checkout countdown banner</p>
<ul>
  <li>Configurable content via extension settings; shows time remaining</li>
</ul>

<pre><code class="language-12:26:c:/Zinus/Zinus/ZinusEmbeddedApp/extensions/zinus-checkout-countdown/src/Checkout.jsx">const [timeLeft, setTimeLeft] = useState(600);
useEffect(() =&gt; { if (!timeLeft) return; const id = setInterval(() =&gt; setTimeLeft(timeLeft - 1), 1000); return () =&gt; clearInterval(id); }, [timeLeft]);
</code></pre>

<p>4) Delivery/misc checkout enrichments</p>
<ul>
  <li>Reads product metafields and surfaces data in checkout context</li>
</ul>

<pre><code class="language-27:41:c:/Zinus/Zinus/ZinusEmbeddedApp/extensions/zinus-checkout-delivery/src/Checkout.jsx">const productId = cartLineTarget?.merchandise?.product?.id;
query(`query { product(id: "${productId}") { variants(first: 25) { edges { node { metafield(namespace: "custom", key: "mattress_height") { value } } } } } }`) ...
</code></pre>

<h3 id="operational-notes">Operational notes</h3>
<ul>
  <li>Use <code class="language-plaintext highlighter-rouge">login</code>/<code class="language-plaintext highlighter-rouge">authenticate</code> helpers exclusively for embedded navigation and API calls</li>
  <li>Keep <code class="language-plaintext highlighter-rouge">ApiVersion</code> aligned with current Admin API; update <code class="language-plaintext highlighter-rouge">restResources</code> accordingly</li>
  <li>Prisma session DB must be shared across instances (SQLite only OK for single instance)</li>
  <li>Extensions should fail “closed” (block or remove lines) to protect compliance</li>
</ul>

<h3 id="why-this-matters">Why this matters</h3>
<p>By pairing an embedded admin app with checkout-native extensions, we deliver merchant control and strict checkout enforcement without slowing down the storefront. Compliance flows (like recycling fees and shipping restrictions) run client-side within Shopify’s secure runtime; data-heavy or cross-system tasks stay server-side in the app.</p>


  </div>
  <footer class="post__footer">
    
      <div class="post__tags">
        <strong>Tags:</strong>
        <span class="tag">#shopify</span><span class="tag">#remix</span><span class="tag">#polaris</span><span class="tag">#prisma</span><span class="tag">#checkout</span><span class="tag">#extensions</span>
      </div>
    
    <nav class="post__pager">
      <a class="pager__prev" href="/Zinus/posts/2025/09/05/keeping-outlook-mailboxes-lean-with-n8n/">← Keeping Outlook Mailboxes Lean with n8n Our “Self-Cleaning Sent Items” Workflow</a>
      <a class="pager__next" href="/Zinus/posts/2025/09/10/wonder-server-architecture-and-apis/">Wonder-Server: Public API gateway powering pickups, feeds, and growth →</a>
    </nav>
  </footer>
</article>



    </main>
    <footer class="site-footer">
  <div class="container footer__inner">
    <p>© 2025 Zinus, Inc. All rights reserved.</p>
    <ul class="social">
      
        <li><a href="https://github.com/zinus-inc" target="_blank" rel="noopener">GitHub</a></li>
      
      
        <li><a href="https://www.linkedin.com/company/zinus-inc/posts/?feedView=all" target="_blank" rel="noopener">LinkedIn</a></li>
      
      <li><a href="/Zinus/feed.xml">RSS</a></li>
    </ul>
  </div>
</footer>



  </body>
  </html>


